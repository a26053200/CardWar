---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhengnan.
--- DateTime: 2019/5/20 15:50
---
--状态节点
---@class StateNode
---@field name string
---@field OnEnter Handler
---@field duration number
---@field OnUpdate Handler
---@field CanExecute Handler
---@field OnExit Handler

---@class Game.Modules.Common.Behavior.StateAction
---@field New fun(node:StateNode):Game.Modules.Common.Behavior.StateAction
---@field execute boolean 是否执行过
---@field startTime number 开始时间
local StateAction = class("Game.Modules.Common.Behavior.StateAction")

---@param node StateNode
function StateAction:Ctor(node)
    self.node = node
    self.startTime = Time.time
    self.execute = false
end

function StateAction:Start()
    self.startTime = Time.time
    self.execute = false
end

function StateAction:Update()
    if self.node.OnUpdate then
        self.node.OnUpdate:Execute()
    end
end

function StateAction:CanExecute()
    if self.node.CanExecute then
        return self.node.CanExecute:Execute()
    end
    return true
end

function StateAction:IsOver()
    if self.node.duration then
        return Time.time - self.startTime > self.duration
    else
        return false
    end
end

return StateAction