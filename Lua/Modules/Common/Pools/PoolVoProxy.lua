---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhengnan.
--- DateTime: 2020/1/8 12:03
--- 池对象Vo工厂
---

---@class Module.Common.Pools.PoolVoProxy
---@field New fun():Module.Common.Pools.PoolVoProxy
---@field list Iterator 列表
---@field pool List 对象池
local PoolVoProxy = class("Module.Common.Pools.PoolVoProxy")

---@param className table
function PoolVoProxy:Ctor(className)
    self.voClass = require(className)
    self.list = Iterator.New()
    self.pool = List.New()
end

---@return Game.Modules.Common.Pools.PoolVo
function PoolVoProxy:Get()
    local vo = self:Pop()
    vo.delete = false
    self.list:Add(vo)
    return vo
end

---@param vo Game.Modules.Common.Pools.PoolVo
function PoolVoProxy:Store(vo)
    if vo == nil then

        return
    end
    vo.delete = true
    self.list:Remove(vo)
    if not self.pool:Contain(vo) then
        self.pool:UnShift(vo)
    end
end

---@return Game.Modules.Common.Pools.PoolVo
function PoolVoProxy:Pop()
    if self.pool:Size() > 0 then
        return self.pool:Shift()
    else
        return self.voClass.New()
    end
end

---@param vo Game.Modules.Common.Pools.PoolVo
---@return boolean
function PoolVoProxy:Contains(vo)
    return self.list.list:Contain(vo)
end

---@return boolean
function PoolVoProxy:IsEmpty()
    return self.pool:Size() == 0
end

return PoolVoProxy