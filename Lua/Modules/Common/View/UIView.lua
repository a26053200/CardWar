---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zheng.
--- DateTime: 2019/1/15 0:09
---

local LuaMonoBehaviour = require("Betel.LuaMonoBehaviour")
---@class Game.Modules.Common.View.UIView : Betel.LuaMonoBehaviour
---@field public New function<prefab:string | UnityEngine.GameObject, parent:UnityEngine.Transform>
---@field public gameObject UnityEngine.GameObject
---@field public scene Game.Modules.World.Scenes.BaseScene
local UIView = class("UIView",LuaMonoBehaviour)

function UIView:Ctor(prefab,parent)
    UIView.super.Ctor(self)
    self.scene = vmgr.scene
    if type(prefab) == TYPE.string then
        local prefabObj = Res.LoadPrefab(prefab)
        self.gameObject = Instantiate(prefabObj,parent)
    elseif type(prefab) == TYPE.userdata then --gameObject
        self.gameObject = prefab
        if parent then
            self.gameObject.transform:SetParent(parent)
        else
            logError("UIView 's parent can not nil")
        end
    end
    self.gameObject.transform.localPosition = Vector3.zero
    self.gameObject.transform.localEulerAngles = Vector3.zero
    self.gameObject.transform.localScale = Vector3.one
    self:OnAutoRegisterEvent()

    self.sequenceList = List.New()
    self:AddLuaMonoBehaviour(self.gameObject,"UIView")
end

--自动注册事件
function UIView:OnAutoRegisterEvent()
    local buttons = LuaHelper.GetChildrenButtons(self.gameObject)
    for i = 0,buttons.Length - 1 do
        local funName = "On_Click_"..buttons[i].gameObject.name
        if self[funName] then
            log("Auto Register Events:" .. funName)
            LuaHelper.AddButtonClick(buttons[i].gameObject,handler(self,self[funName]))
        end
    end
end

--创建
function UIView:CreateSequence()
    local sequence = DOTween.Sequence()
    self.sequenceList:Push(sequence)
    return sequence
end


function UIView:Dispose()
    if self.sequenceList then
        for i = 1, self.sequenceList:Size() do
            self.sequenceList[i]:Kill()
        end
    end
    self.sequenceList = nil
end

function UIView:OnDestroy()

end

return UIView