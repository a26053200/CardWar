---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zheng.
--- DateTime: 2019/5/22 21:13
---

local LuaMonoBehaviour = require('Betel.LuaMonoBehaviour')

---@class Game.Modules.Common.Camera.AttachCamera : Betel.LuaMonoBehaviour
---@field New fun(camera:UnityEngine.Camera) : Game.Modules.Common.Camera.AttachCamera
---@field target UnityEngine.GameObject
---@field camera UnityEngine.Camera
---@field attach boolean
local AttachCamera = class("Game.Modules.Common.Camera.AttachCamera",LuaMonoBehaviour)

local Speed = 5.7
---@param camera UnityEngine.Camera
function AttachCamera:Ctor(camera)
    AttachCamera.super.Ctor(self, camera.gameObject)

    self.camera = camera
    self.offset = Vector3.New(0, 8, -13)

    self:AddLuaMonoBehaviour(camera.gameObject, "AttachCamera")
end

---@param target UnityEngine.GameObject
function AttachCamera:Attach(target)
    self.target = target
    self.camera.transform.position = self.target.transform.position + self.offset
    self.attach = true
end

---@param target UnityEngine.GameObject
function AttachCamera:Update()
    if self.attach then
        if self.target then
            self.camera.transform.position = Vector3.Lerp(self.camera.transform.position,self.target.transform.position + self.offset, Time.deltaTime * Speed)
        end
    end
end

function AttachCamera:Dispose()
    AttachCamera.super.Dispose(self)
    self.target = nil
end

return AttachCamera