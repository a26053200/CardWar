---
--- Generated by Tools
--- Created by zheng.
--- DateTime: 2020-06-19-23:48:36
---

local CheckPointItem = require("Game.Modules.CheckPoint.View.CheckPointItem")
local BaseMediator = require("Game.Core.Ioc.BaseMediator")
---@class Game.Modules.CheckPoint.View.CheckPointMdr : Game.Core.Ioc.BaseMediator
---@field checkPointModel Game.Modules.CheckPoint.Model.CheckPointModel
---@field arrayModel Game.Modules.Array.Model.ArrayModel
---@field checkPointService Game.Modules.CheckPoint.Service.CheckPointService
---@field chapterData ChapterData
---@field positionList Betel.UI.PositionList
local CheckPointMdr = class("Game.Modules.CheckPoint.View.CheckPointMdr",BaseMediator)

function CheckPointMdr:Ctor()
    CheckPointMdr.super.Ctor(self)
    self.layer = UILayer.LAYER_FLOAT
end

function CheckPointMdr:OnInit()
    self.chapterData = CheckPointConfig.GetChapterData(self.checkPointModel.currChapter)
    self.positionList = PositionList.New(self.gameObject:FindChild("List/ListView"), CheckPointItem)
    self.positionList:SetPosList(self.chapterData.uiLayoutUrl)
    self.positionList:SetData(List.New(self.chapterData.sections))
    self.positionList.eventDispatcher:AddEventListener(ListViewEvent.ItemClick,self.onItemClick, self)
end

function CheckPointMdr:onItemClick(event, data, index)
    self.arrayModel.currCheckPointData = data
    vmgr:LoadView(ViewConfig.ArrayEditor)
end

function CheckPointMdr:On_Click_BtnBack()
    vmgr:UnloadView(ViewConfig.CheckPoint)
end

return CheckPointMdr
