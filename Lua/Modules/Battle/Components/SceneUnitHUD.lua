---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zheng.
--- DateTime: 2019/5/31 0:17
---

local LuaMonoBehaviour = require('Betel.LuaMonoBehaviour')

---@class Game.Modules.Battle.Components.SceneUnitHUD : Betel.LuaMonoBehaviour
---@field New fun(avatar:Game.Modules.World.Items.BattleUnit) : Game.Modules.Battle.Components.SceneUnitHUD
---@field battleUnit Game.Modules.World.Items.BattleUnit
---@field battleUnitVo Game.Modules.Battle.Vo.BattleUnitVo
---@field worldCamera UnityEngine.Camera
---@field uiLayerRect UnityEngine.RectTransform
local SceneItemHUD = class("Game.Modules.Battle.Components.SceneUnitHUD", LuaMonoBehaviour)

function SceneItemHUD:Ctor()
    self.uiLayer = vmgr:GetUILayer(UILayer.LAYER_SCENE)
    self.uiLayerRect = self.uiLayer.gameObject:GetRect()
    SceneItemHUD.super.Ctor(self, self.gameObject)
end

function SceneItemHUD:SetHost(battleUnit)
    self.battleUnit = battleUnit
    self.worldCamera = battleUnit.context.currSubScene:GetCamera()
    self.battleUnitVo = self.battleUnit.battleUnitVo
    self:Init()
end

function SceneItemHUD:Init()
    AddEventListener(self, Event.UPDATE, self.Update, self)
end

function SceneItemHUD:Update()

end
---@param offset UnityEngine.Vector3
---@return UnityEngine.Vector3
function SceneItemHUD:GetTargetUIPos(offset)
    local tagPos = Convert.WorldPosToCanvasLocalPosition(self.battleUnit.transform.position, self.worldCamera, vmgr.uiCanvas, self.uiLayerRect)
    return tagPos + offset
end

function SceneItemHUD:Dispose()
    SceneItemHUD.super.Dispose(self)
    RemoveEventListener(self, Event.UPDATE, self.Update, self)
end

return SceneItemHUD